task.md

> å…ˆè·‘èµ·æ¥

ä½¿ç”¨ä¾‹å­å¯ä»¥è·‘å‡ºæ¥ï¼Œæ¢ä¸€å¼ å›¾ç‰‡å°±ä¸è¡Œäº†ï¼Œä¼šæŠ¥é”™ã€‚

# æ’é”™

## é”™è¯¯ 1: å› ä¸ºè¯†åˆ«è¡¨æ ¼å¤šå‡ºæ¥çš„å™ªç‚¹ï¼ŒæŠ¥é”™æ•°ç»„è¶Šç•Œ

```py
vertical_kernel = cv2.getStructuringElement(
        cv2.MORPH_RECT, (1, np.array(img).shape[1] // 100)
    )
```

æ‰‹åŠ¨ä¿®æ”¹è¿™é‡Œå¯ä»¥è°ƒæ•´ã€‚

æˆ–è€…åœ¨è¿™é‡Œè®¾ç½®ï¼š
img=Image('./test6.png',line_length=100)

## é”™è¯¯ 2 ï¼šå‰é¢ OKï¼Œè¿˜æ˜¯æŠ¥é”™æ•°ç»„è¶Šç•Œ

# è®°å½•

é€šè¿‡ cv2.findContours è¿”å›çš„è½®å»“æ•°ç»„ï¼Œä¸ºä»€ä¹ˆæ¯”å•å…ƒæ ¼æ•°é‡å¤šï¼Ÿ

æ¯”å¦‚æˆ‘æœ‰ä¸ª 2x2 çš„è¡¨æ ¼ï¼Œ
ä¼šè¿”å› 4 ä¸ªå•å…ƒæ ¼ï¼Œè¿˜ä¼šæ•´ä¸ªè¡¨æ ¼ä¹Ÿæ˜¯ä¸€ä¸ªè½®å»“ï¼Œ+ æ•´å¼ å›¾ç‰‡ä¹Ÿæ˜¯ä¸€ä¸ªè½®å»“ï¼ˆ0ï¼Œ0 å¼€å§‹çš„ï¼‰

# æµ‹è¯•ï¼Œæˆ‘ç”¨ä¸€ä¸ªæœ€ç®€å•çš„ 2x2 çš„å›¾ç‰‡æµ‹è¯•

å‘ç°
æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯å¾ˆå¤šå•å…ƒæ ¼è¯†åˆ«çš„æ–‡å­—æ˜¯ç©ºå­—ç¬¦ä¸²ã€‚

è°ƒè¯•å‘ç°ï¼Œ
imge to string æ˜¯ï¼Œä¼ çš„è£åˆ‡å›¾ç‰‡æœ‰é—®é¢˜ï¼Œæ²¡æœ‰æ­£ç¡®çš„è£åˆ‡åˆ°çš„ã€‚

ä»£ç é‡Œé¢æœ‰é”™å•Šå§ï¼Œæ”¹æˆï¼š

```py
roi = bitnot[y : y + h, x : x + w]
```

ä¸ºä»€ä¹ˆåŸå…ˆçš„èƒ½è·‘å‘¢ï¼Ÿ

ç¬¬äºŒå¤„é”™è¯¯ï¼š

```
print(dataframe[i][j],end=" ")
```

åº”è¯¥æ”¹æˆï¼š

```
print(dataframe.iloc[i][j],end=" ")
```

å¦åˆ™ä¼šæŠ¥é”™çš„

# å§æ§½ä¸è¡Œå•Šï¼Œæ”¹äº†ä¹‹åï¼ŒåŸå…ˆçš„å›¾ç‰‡è¯†åˆ«æœ‰é—®é¢˜äº†ã€‚ã€‚ã€‚ã€‚

# æºä»£ç è§£æï¼š

æ²¡çœ‹æ‡‚ centre çš„æ„ä¹‰ã€‚

# é€»è¾‘è§£æï¼š

1. å›¾ç‰‡è¯†åˆ«ï¼Œæ‰¾åˆ°è¡¨æ ¼ï¼ˆè¿™ä¸€æ­¥è¦æ¸…æ™°ï¼Œé¿å…å™ªç‚¹ï¼‰
2.

# é—®é¢˜ï¼šä½ç½®æ²¡æœ‰å¯¹ä¸Šå•Šã€‚

ä½ç½®å¯¹ä¸Šäº†ã€‚

# ä½ç½®æ²¡æœ‰å¯¹ä¸Šçš„é—®é¢˜ ğŸ˜‚ï¼Œæºè‡ªäº box ä¸­ x,y é¡ºåºä¸ä¸€æ ·çš„é—®é¢˜

```py
y,x,w,h = boxes_list[i][j][k][0],boxes_list[i][j][k][1], boxes_list[i][j][k][2],boxes_list[i][j][k][3]
roi = bitnot[x:x+h, y:y+w]
```

æœ‰çš„åœ°æ–¹æ˜¯è¿™ä¹ˆå†™çš„ã€‚ã€‚ã€‚ã€‚
å‘çˆ¹å•Šã€‚

img æ•°ç»„æ˜¯ y,x æ’åˆ—çš„ã€‚ã€‚ã€‚ã€‚

```
img = cv2.imread(file)
```

OpenCV ä¸­å›¾åƒçš„ shape å±æ€§è¿”å›çš„å…ƒç»„æ˜¯ (height, width)ï¼Œè€Œä¸æ˜¯ (width, height)ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š

1. å†å²åŸå› 

OpenCV æœ€åˆæ˜¯åœ¨ C++ ä¸­å¼€å‘çš„ï¼Œè€Œ C++ ä¸­çš„çŸ©é˜µé€šå¸¸æ˜¯æŒ‰è¡Œå­˜å‚¨çš„ã€‚å› æ­¤ï¼ŒOpenCV ä¸­å›¾åƒçš„ shape å±æ€§ä¹Ÿéµå¾ªäº†è¿™ç§è¡Œå­˜å‚¨çš„æ ¼å¼ã€‚

2. ä¸å…¶ä»–åº“å…¼å®¹

è®¸å¤šå…¶ä»–å›¾åƒå¤„ç†åº“ï¼Œä¾‹å¦‚ NumPy å’Œ Matplotlibï¼Œä¹Ÿéƒ½ä½¿ç”¨ (height, width) æ ¼å¼æ¥è¡¨ç¤ºå›¾åƒçš„å°ºå¯¸ã€‚ä¸ºäº†ä¸è¿™äº›åº“å…¼å®¹ï¼ŒOpenCV ä¹Ÿé‡‡ç”¨äº†ç›¸åŒçš„æ ¼å¼ã€‚

3. ç¬¦åˆç›´è§‰

å¯¹äºå¤§å¤šæ•°å›¾åƒæ¥è¯´ï¼Œé«˜åº¦æ¯”å®½åº¦æ›´é‡è¦ã€‚å› æ­¤ï¼Œå°†é«˜åº¦æ”¾åœ¨å…ƒç»„çš„ç¬¬ä¸€ä¸ªä½ç½®å¯ä»¥æ›´ç›´è§‚åœ°è¡¨ç¤ºå›¾åƒçš„å°ºå¯¸ã€‚

4. ä¾¿äºè®¡ç®—

åœ¨è®¸å¤šå›¾åƒå¤„ç†æ“ä½œä¸­ï¼Œä¾‹å¦‚å›¾åƒç¼©æ”¾å’Œæ—‹è½¬ï¼Œéƒ½éœ€è¦ä½¿ç”¨å›¾åƒçš„é«˜åº¦å’Œå®½åº¦ã€‚å°†é«˜åº¦æ”¾åœ¨å…ƒç»„çš„ç¬¬ä¸€ä¸ªä½ç½®å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œè¿™äº›è®¡ç®—ã€‚

æ€»è€Œè¨€ä¹‹ï¼ŒOpenCV ä¸­å›¾åƒçš„ shape å±æ€§è¿”å›çš„å…ƒç»„æ˜¯ (height, width)ï¼Œä¸»è¦æœ‰å†å²åŸå› ã€å…¼å®¹æ€§ã€ç›´è§‰å’Œè®¡ç®—æ–¹ä¾¿ç­‰æ–¹é¢çš„è€ƒè™‘ã€‚

ä»¥ä¸‹æ˜¯ä¸€äº›å…¶ä»–ç›¸å…³çš„ä¿¡æ¯ï¼š

åœ¨ OpenCV ä¸­ï¼Œå›¾åƒçš„å®½åº¦å¯ä»¥é€šè¿‡ image.cols å±æ€§è·å–ï¼Œå›¾åƒçš„é«˜åº¦å¯ä»¥é€šè¿‡ image.rows å±æ€§è·å–ã€‚
åœ¨ NumPy ä¸­ï¼Œå›¾åƒçš„å½¢çŠ¶å¯ä»¥é€šè¿‡ image.shape å±æ€§è·å–ï¼Œè¿”å›çš„å…ƒç»„ä¹Ÿæ˜¯ (height, width) æ ¼å¼ã€‚
åœ¨ Matplotlib ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ plt.imshow å‡½æ•°æ˜¾ç¤ºå›¾åƒï¼Œè¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›¾åƒæ•°æ®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ cmap å‚æ•°ï¼Œç”¨äºè®¾ç½®å›¾åƒçš„é¢œè‰²æ˜ å°„ã€‚

# test6 å•å…ƒæ ¼ä½ç½®æ­£ç¡®äº†ï¼Œè¯†åˆ«è¿˜æ˜¯æœ‰é—®é¢˜ã€‚

å¥‡æ€ªäº†ã€‚ã€‚ã€‚

```
import pytesseract
img = cv2.imread('./output_name.png', 0)
pytesseract.image_to_string(img)
```

è¿™ç§ï¼Œèƒ½è¯†åˆ«å‡ºæ¥å•Šã€‚

å¦¹å“Ÿè¯†åˆ«å‡ºæ¥
æˆ‘æŠŠ resizing è°ƒå¤§äº†ã€‚ 250 å®½åº¦ï¼Œè¯†åˆ«å‡ºæ¥äº†ã€‚

å¯è§ï¼Œæ–‡å­—è¦å¤§ä¸€ç‚¹ï¼Œæ‰èƒ½è¯†åˆ«å•Šã€‚

# baocuo

```
center = [int(rows[i][j][0]+rows[i][j][2]/2) for j in range(len(rows[i])) if rows[0]]
print(center)
```

i æ˜¯ä¸Šä¸€æ­¥

```
total_cells=0
for i in range(len(row)):
  if len(row[i]) > total_cells:
    total_cells = len(row[i])
print(total_cells)
```

ç”Ÿæˆçš„ã€‚

è¿™ tmd æ˜æ˜¾æ˜¯ bug å•Šã€‚
æ³¨æ„ä¸Šä¸€æ­¥æ˜¯å¯¹ row å¾ªç¯ï¼Œç„¶åå» rows[i]è¿™å°±æ‰¯æ·¡äº†ã€‚ã€‚ã€‚ã€‚
å“ï¼Œbug çœŸå¤šå•Šã€‚

è¿™æ®µä»£ç åº”è¯¥æ˜¯ï¼š

```
total_cells=0
for i in range(len(rows)):
    if len(rows[i]) > total_cells:
        total_cells = len(rows[i])
print(total_cells)
```

# é‡æ–°æ¢³ç†è¿™ä¸ªé€»è¾‘ï¼š

1. å›¾ç‰‡ä¸­çš„è¡¨æ ¼æå–ã€‚

```
boundingBoxes = [cv2.boundingRect(c) for c in cnts]

(contours, boundingBoxes) = zip(*sorted(zip(cnts, boundingBoxes),
key=lambda x:x[1][1]))
```

è¿™æ®µä»£ç ç”¨ gemini çœ‹æ‡‚äº†ã€‚
åŸæ¥æ˜¯æ’åºå•Š/

ç»ˆäºè·‘é€šäº†ã€‚ã€‚ã€‚

# ç»ˆäºæå®šäº†ã€‚

ä¸åŒçš„å›¾ç‰‡ï¼Œéœ€è¦ä¿®æ”¹ line_sizeï¼Œè¿™æ ·ä¼šå½±å“è¯†åˆ«æ ¼å­æ—¶çš„å™ªå£°ã€‚

ä¿®æ”¹ fxyï¼ˆå›¾ç‰‡æ”¾å¤§å€æ•°ï¼‰ï¼Œè¿™æ ·ä¼šå½±å“è¯†åˆ«æ•ˆæœã€‚
